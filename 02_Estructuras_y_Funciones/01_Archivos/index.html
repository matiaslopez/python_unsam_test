<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://matiaslopez.github.io/python_unsam_test/02_Estructuras_y_Funciones/01_Archivos/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>01 Archivos - Programación en Python</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/yaml.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-ABC123"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());

          gtag('config', 'G-ABC123');
        </script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-light bg-light">
            <div class="container">
                <a class="navbar-brand" href="../..">Programación en Python</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../.." class="nav-link">Inicio</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Unidades <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../01_Introduccion/00_Resumen/" class="dropdown-item">01 - Introducción</a>
</li>
                                    
<li>
    <a href="../00_Resumen/" class="dropdown-item">02 - Estructuras y funciones</a>
</li>
                                    
<li>
    <a href="../../03_Datos/00_Resumen/" class="dropdown-item">03 - Trabajando con datos</a>
</li>
                                    
<li>
    <a href="../../04_Listas_y_Listas/00_Resumen/" class="dropdown-item">04 - Algoritmos sobre listas y comprensión de listas</a>
</li>
                                    
<li>
    <a href="../../05_Random_Plt_Dbg/00_Resumen/" class="dropdown-item">05 - Aleatoridad</a>
</li>
                                    
<li>
    <a href="../../06_Organizacion_y_Complejidad/00_Resumen/" class="dropdown-item">06 - Complejidad y Organización de programas</a>
</li>
                                    
<li>
    <a href="../../07_Plt_Especificacion_y_Documentacion/00_Resumen/" class="dropdown-item">07 - Diseño, especificación, documentación y estilo</a>
</li>
                                    
<li>
    <a href="../../08_Fechas_Carpetas_y_Pandas/00_Resumen/" class="dropdown-item">08 - Fechas, Carpetas y Pandas</a>
</li>
                                    
<li>
    <a href="../../09_Clases_y_Objetos/00_Resumen/" class="dropdown-item">09 - Clases y objetos</a>
</li>
                                    
<li>
    <a href="../../10_Generadores_e_Iteradores/00_Resumen/" class="dropdown-item">10 - Generadores e iteradores</a>
</li>
                                    
<li>
    <a href="../../11_Recursion/00_Resumen/" class="dropdown-item">11 - Recursión y regresión</a>
</li>
                                    
<li>
    <a href="../../12_Ordenamiento/00_Resumen/" class="dropdown-item">12 - Ordenamiento</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Buscar
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Tabla de contenidos">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#21-manejo-de-archivos" class="nav-link">2.1 Manejo de archivos</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#ejercicios" class="nav-link">Ejercicios</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<p><a href="../Contenidos.md">Contenidos</a> | <a href="../02_Funciones/">Próximo (2 Funciones)</a></p>
<h1 id="21-manejo-de-archivos">2.1 Manejo de archivos</h1>
<p>La mayoría de los programas usa alguna fuente de datos. En esta sección discutimos el acceso a archivos.</p>
<h3 id="archivos-de-entrada-y-salida">Archivos de entrada y salida</h3>
<p>Con estos comandos podés abrir dos archivos, una para lectura y otro para escritura:</p>
<pre><code class="language-python">f = open('foo.txt', 'rt')     # Abrir para lectura ('r' de read, 't' de text)
g = open('bar.txt', 'wt')     # Abrir para escritura ('w' de write, 't' de text)
</code></pre>
<p><em>Observación: los nombres <a href="https://es.wikipedia.org/wiki/Foo">foo, bar, foobar</a> son genéricos que se usan usualmente para aludir a un nombre que se ignora, son los análogos informáticos a fulano, mengano y zutano.</em></p>
<p>Para leer el archivo completo, o una parte:</p>
<pre><code class="language-python">data = f.read()

# Leer 'maxbytes' bytes
data = f.read([maxbytes])
</code></pre>
<p>Para escribir un texto en el archivo:</p>
<pre><code class="language-python">g.write('un texto')
</code></pre>
<p>Finalmente, hay que cerrar los archivos cuando terminamos de usarlos.</p>
<pre><code class="language-python">f.close()
g.close()
</code></pre>
<p>Es importante cerrar adecuadamente los archivos y es bastante fácil olvidarse (puede que el programa termine y no se termine de guardar bien). Por eso, preferimos abrir los archivos con el comando <code>with</code> de la siguiente forma.</p>
<pre><code class="language-python">with open(nombre_archivo, 'rt') as file:
    # Usá el archivo `file`
    ...comandos que usan el archivo
    # No hace falta cerrarlo explícitamente
...comandos que no usan el archivo
</code></pre>
<p>Esto cierra automáticamente el archivo cuando se termina de ejecutar el bloque indentado.</p>
<p><em>Observación: En algunos sistemas operativos es probable que le tengas que especificar el</em> encoding <em>agregando <code>encoding='utf8'</code> como parámetro al comando <code>open</code>.</em></p>
<h3 id="comandos-usuales-para-leer-un-archivo">Comandos usuales para leer un archivo</h3>
<p>Para leer un archivo entero, todo de una, como cadena:</p>
<pre><code class="language-python">with open('foo.txt', 'rt') as file:
    data = file.read()
    # `data` es una cadena con *todo* el texto en `foo.txt`
</code></pre>
<p>Para leer línea por línea iterativamente:</p>
<pre><code class="language-python">with open(nombre_archivo, 'rt') as file:
    for line in file:
        # Procesar la línea
</code></pre>
<h3 id="comandos-usuales-para-escribir-un-archivo">Comandos usuales para escribir un archivo</h3>
<p>Para escribir cadenas:</p>
<pre><code class="language-python">with open('outfile', 'wt') as out:
    out.write('Hello World\n')
    ...
</code></pre>
<p>También podés simplemente redireccionar la salida del print (de la pantalla a un archivo).</p>
<pre><code class="language-python">with open('outfile', 'wt') as out:
    print('Hello World', file=out)
    ...
</code></pre>
<h2 id="ejercicios">Ejercicios</h2>
<p>Estos ejercicios usan el archivo <code>Data/camion.csv</code>.  El archivo contiene una lista de líneas con información sobre los cajones de fruta cargados en un camión. Suponemos que estás trabajando en el directorio <code>ejercicios_python/</code> del curso. Si no estás segure, podés pedirle al Python que te diga dónde está trabajando con este comando:</p>
<pre><code class="language-python">&gt;&gt;&gt; import os
&gt;&gt;&gt; os.getcwd()
'/Users/profe/Desktop/ejercicios_python/Clase02/' # La salida va a cambiar
&gt;&gt;&gt;
</code></pre>
<h3 id="ejercicio-21-preliminares-sobre-lectura-de-archivos">Ejercicio 2.1: Preliminares sobre lectura de archivos</h3>
<p>Primero, tratá de leer el archivo entero de una en una larga cadena:</p>
<pre><code class="language-python">&gt;&gt;&gt; with open('../Data/camion.csv', 'rt') as f:
        data = f.read()

&gt;&gt;&gt; data
'nombre,cajones,precio\n&quot;Lima&quot;,100,32.20\n&quot;Naranja&quot;,50,91.10\n&quot;Caqui&quot;,150,83.44\n&quot;Mandarina&quot;,200,51.23\n&quot;Durazno&quot;,95,40.37\n&quot;Mandarina&quot;,50,65.10\n&quot;Naranja&quot;,100,70.44\n'
&gt;&gt;&gt; print(data)
nombre,cajones,precio
&quot;Lima&quot;,100,32.20
&quot;Naranja&quot;,50,91.10
&quot;Caqui&quot;,150,83.44
&quot;Mandarina&quot;,200,51.23
&quot;Durazno&quot;,95,40.37
&quot;Mandarina&quot;,50,65.10
&quot;Naranja&quot;,100,70.44
&gt;&gt;&gt;
</code></pre>
<p>En el ejemplo de arriba podrás observar que Python tiene dos modos de salida. En el primero escribiste <code>data</code> en el intérprete y Python mostró la representación <em>cruda</em> de la cadena, incluyendo comillas y códigos de escape. Cuando escribiste <code>print(data)</code>, en cambio, obtuviste la salida formateada de la cadena.</p>
<p>Leer un archivo entero y cargarlo en memoria todo de una vez parece simple, pero sólo tiene ventajas si el archivo es pequeño. Si estás trabajando con archivos enormes es mejor procesar las líneas de tu archivo una a una.</p>
<p>Para leer una archivo línea por línea, usá un ciclo for como éste:</p>
<pre><code class="language-python">&gt;&gt;&gt; with open('../Data/camion.csv', 'rt') as f:
        for line in f:
            print(line, end = '')

nombre,cajones,precio
&quot;Lima&quot;,100,32.2
&quot;Naranja&quot;,50,91.1
...
&gt;&gt;&gt;
</code></pre>
<p>En ese código, las líneas son leídas una por una hasta el final del archivo, cuando el ciclo se termina.</p>
<p>En ciertas ocasiones, puede pasar que quieras leer una sola línea de texto (por ejemplo, querés saltearte la primera línea del archivo que contiene los nombres de las columnas).</p>
<pre><code class="language-python">&gt;&gt;&gt; f = open('../Data/camion.csv', 'rt')
&gt;&gt;&gt; headers = next(f)
&gt;&gt;&gt; headers
'nombre,cajones,precio\n'
&gt;&gt;&gt; for line in f:
        print(line, end = '')

&quot;Lima&quot;,100,32.20
&quot;Naranja&quot;,50,91.10
...
&gt;&gt;&gt; f.close()
&gt;&gt;&gt;
</code></pre>
<p>El comando <code>next()</code> devuelve la siguiente línea de texto en el archivo. Sin embargo, sólo para que sepas, los ciclos <code>for</code> usan el método <code>next()</code> para obtener sus datos. Por lo tanto, típicamente no forzás un llamado extra a <code>next()</code> salvo que explícitamente quieras saltear o leer una línea particular como en nuestro caso de acá abajo.</p>
<p>Una vez que estés leyendo un archivo línea a línea, podés hacer otras operaciones, como separar los datos dentro de una línea con el método <code>split()</code>. Por ejemplo, probá esto:</p>
<pre><code class="language-python">&gt;&gt;&gt; f = open('../Data/camion.csv', 'rt')
&gt;&gt;&gt; headers = next(f).split(',')
&gt;&gt;&gt; headers
['nombre', 'cajones', 'precio\n']
&gt;&gt;&gt; for line in f:
        row = line.split(',')
        print(row)

['&quot;Lima&quot;', '100', '32.20\n']
['&quot;Naranja&quot;', '50', '91.10\n']
...
&gt;&gt;&gt; f.close()
</code></pre>
<p><em>Observación: En estos ejemplos tuvimos que llamar  a <code>f.close()</code> explícitamente porque no estamos trabajando con el comando <code>with</code>.</em></p>
<h3 id="ejercicio-22-lectura-de-un-archivo-de-datos">Ejercicio 2.2: Lectura de un archivo de datos</h3>
<p>Ahora que sabés leer un archivo, escribamos un programa que haga un cálculo simple con los datos leídos.</p>
<p>Las columnas en <code>camion.csv</code> corresponden a un nombre de fruta, una cantidad de cajones cargados en el camión, y un precio de compra por cada cajón de ese grupo. Escribí un programa llamado <code>costo_camion.py</code>  que abra el archivo, lea las líneas, y calcule el precio pagado por los cajones cargados en el camión.</p>
<p><em>Ayuda: para interpretar un string <code>s</code> como un número entero, usá <code>int(s)</code>. Para leerlo como punto flotante, usá <code>float(s)</code>.</em></p>
<p>Tu programa debería imprimir una salida como la siguiente:</p>
<pre><code class="language-bash">Costo total 47671.15
</code></pre>
<p>Acordate de guardar tu archivo en el directorio <code>Clase02</code>; vamos a volver a trabajar sobre él.</p>
<h3 id="ejercicio-23-precio-de-la-naranja">Ejercicio 2.3: Precio de la naranja</h3>
<p>El archivo <code>Data/precios.csv</code> contiene una serie de líneas con precios de venta de cajones en el mercado al que va el camión. El archivo se ve así:</p>
<pre><code class="language-csv">&quot;Lima&quot;,40.22
&quot;Uva&quot;,24.85
&quot;Ciruela&quot;,44.85
&quot;Cereza&quot;,11.27
&quot;Frutilla&quot;,53.72
...
</code></pre>
<p>Escribí un código que abra el archivo <code>Data/precios.csv</code>, busque el precio de la naranja y lo imprima en pantalla.</p>
<pre><code class="language-python">&gt;&gt;&gt; f = open('../Data/precios.csv', 'rt')
...
&gt;&gt;&gt; f.close()

El precio de la naranja es:  106.28
</code></pre>
<h3 id="ejercicio-24-archivos-comprimidos">Ejercicio 2.4: Archivos comprimidos</h3>
<p>¿Que pasaría si quisiéramos leer un archivo comprimido con gzip, por ejemplo? La función primitiva de Python  <code>open()</code> no hace esa tarea. Pero hay un módulo de la biblioteca de Python llamado <code>gzip</code> que lee archivos comprimidos.</p>
<p>Probalo:</p>
<pre><code class="language-python">&gt;&gt;&gt; import gzip
&gt;&gt;&gt; with gzip.open('../Data/camion.csv.gz', 'rt') as f:
        for line in f:
            print(line, end = '')

... mirá la salida ...
&gt;&gt;&gt;
</code></pre>
<p><em>Observación: La inclusión del modo  <code>'rt'</code> es crítica acá. Si te lo olvidás, vas a estar leyendo cadenas de bytes en lugar de cadenas de caracteres.</em></p>
<h3 id="comentario-no-deberiamos-estar-usando-pandas-para-esto">Comentario: ¿No deberíamos estar usando Pandas para esto?</h3>
<p>Es frecuente que les estudiantes que conocen un poco más de Python rápidamente señalen que hay módulos como <a href="https://pandas.pydata.org">Pandas</a> que tienen, entre muchas otras funcionalidades, la posibilidad de leer archivos CSV en una sola instrucción. Es verdad, y funcionan muy bien. Sin embargo, este no es un curso sobre Pandas. Si bien más adelante veremos algo de esta biblioteca, lo que nos interesa en este momento es aprender a manejar archivos directamente. Estamos trabajando con archivos CSV porque es un formato sencillo que es muy útil conocer, pero es principalmente una excusa para mostrar cómo Python maneja archivos de texto. En resumen, cuando tengas que trabajar con datos, definitivamente usá Pandas. Pero para aprender a manejar archivos vamos a seguir usando las funciones básicas de Python.</p>
<p><a href="../Contenidos.md">Contenidos</a> | <a href="../02_Funciones/">Próximo (2 Funciones)</a></p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentación construida con <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Buscar</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Cerrar</span></button>
            </div>
            <div class="modal-body">
                <p>Desde aquí puede buscar estos documentos. Ingrese sus términos de búsqueda a continuación.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Buscando..." id="mkdocs-search-query" title="Escriba el término de búsqueda aquí">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No se encontraron resultados"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Atajos de teclado</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Cerrar</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Teclas</th>
                    <th>Acción</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Abrir esta ayuda</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Página siguiente</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Página anterior</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Buscar</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
