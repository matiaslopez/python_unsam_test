<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="UNSAM">
        <link rel="canonical" href="https://matiaslopez.github.io/python_unsam_test/12_Ordenamiento/03_Divide_and_Conquer/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>03 Divide and Conquer - Programación</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/yaml.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-ABC123"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());

          gtag('config', 'G-ABC123');
        </script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-light bg-light">
            <div class="container">
                <a class="navbar-brand" href="../..">Programación</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../.." class="nav-link">Inicio</a>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Unidades <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">01 - Introducción</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../01_Introduccion/00_Resumen/" class="dropdown-item">00 Resumen</a>
</li>
            
<li>
    <a href="../../01_Introduccion/01_Python/" class="dropdown-item">01 Python</a>
</li>
            
<li>
    <a href="../../01_Introduccion/02_Hello_world/" class="dropdown-item">02 Hello world</a>
</li>
            
<li>
    <a href="../../01_Introduccion/03_Numeros/" class="dropdown-item">03 Numeros</a>
</li>
            
<li>
    <a href="../../01_Introduccion/04_Strings/" class="dropdown-item">04 Strings</a>
</li>
            
<li>
    <a href="../../01_Introduccion/05_Listas/" class="dropdown-item">05 Listas</a>
</li>
            
<li>
    <a href="../../01_Introduccion/06_CierreClase/" class="dropdown-item">06 CierreClase</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">02 - Estructuras y funciones</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../02_Estructuras_y_Funciones/00_Resumen/" class="dropdown-item">00 Resumen</a>
</li>
            
<li>
    <a href="../../02_Estructuras_y_Funciones/01_Archivos/" class="dropdown-item">01 Archivos</a>
</li>
            
<li>
    <a href="../../02_Estructuras_y_Funciones/02_Funciones/" class="dropdown-item">02 Funciones</a>
</li>
            
<li>
    <a href="../../02_Estructuras_y_Funciones/03_TiposDatos/" class="dropdown-item">03 TiposDatos</a>
</li>
            
<li>
    <a href="../../02_Estructuras_y_Funciones/04_Contenedores/" class="dropdown-item">04 Contenedores</a>
</li>
            
<li>
    <a href="../../02_Estructuras_y_Funciones/05_CierreClase/" class="dropdown-item">05 CierreClase</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">03 - Trabajando con datos</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../03_Datos/00_Resumen/" class="dropdown-item">00 Resumen</a>
</li>
            
<li>
    <a href="../../03_Datos/01_Bugs/" class="dropdown-item">01 Bugs</a>
</li>
            
<li>
    <a href="../../03_Datos/02_Secuencias/" class="dropdown-item">02 Secuencias</a>
</li>
            
<li>
    <a href="../../03_Datos/03_Contadores/" class="dropdown-item">03 Contadores</a>
</li>
            
<li>
    <a href="../../03_Datos/04_IDE/" class="dropdown-item">04 IDE</a>
</li>
            
<li>
    <a href="../../03_Datos/05_Formato/" class="dropdown-item">05 Formato</a>
</li>
            
<li>
    <a href="../../03_Datos/06_Arboles1/" class="dropdown-item">06 Arboles1</a>
</li>
            
<li>
    <a href="../../03_Datos/07_CierreClase/" class="dropdown-item">07 CierreClase</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">04 - Algoritmos sobre listas y comprensión de listas</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../04_Listas_y_Listas/00_Resumen/" class="dropdown-item">00 Resumen</a>
</li>
            
<li>
    <a href="../../04_Listas_y_Listas/01_Debugger/" class="dropdown-item">01 Debugger</a>
</li>
            
<li>
    <a href="../../04_Listas_y_Listas/02_IteradoresLista/" class="dropdown-item">02 IteradoresLista</a>
</li>
            
<li>
    <a href="../../04_Listas_y_Listas/03_Comprension_Listas/" class="dropdown-item">03 Comprension Listas</a>
</li>
            
<li>
    <a href="../../04_Listas_y_Listas/04_Objetos/" class="dropdown-item">04 Objetos</a>
</li>
            
<li>
    <a href="../../04_Listas_y_Listas/05_Arboles2_LC/" class="dropdown-item">05 Arboles2 LC</a>
</li>
            
<li>
    <a href="../../04_Listas_y_Listas/06_Cierre/" class="dropdown-item">06 Cierre</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">05 - Aleatoridad</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../05_Random_Plt_Dbg/00_Resumen/" class="dropdown-item">00 Resumen</a>
</li>
            
<li>
    <a href="../../05_Random_Plt_Dbg/01_Random/" class="dropdown-item">01 Random</a>
</li>
            
<li>
    <a href="../../05_Random_Plt_Dbg/02_NumPy_Arrays/" class="dropdown-item">02 NumPy Arrays</a>
</li>
            
<li>
    <a href="../../05_Random_Plt_Dbg/03_Figuritas/" class="dropdown-item">03 Figuritas</a>
</li>
            
<li>
    <a href="../../05_Random_Plt_Dbg/04_Arboles3_plt/" class="dropdown-item">04 Arboles3 plt</a>
</li>
            
<li>
    <a href="../../05_Random_Plt_Dbg/05_Cierre/" class="dropdown-item">05 Cierre</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">06 - Complejidad y Organización de programas</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../06_Organizacion_y_Complejidad/00_Resumen/" class="dropdown-item">00 Resumen</a>
</li>
            
<li>
    <a href="../../06_Organizacion_y_Complejidad/01_Repaso/" class="dropdown-item">01 Repaso</a>
</li>
            
<li>
    <a href="../../06_Organizacion_y_Complejidad/02_Scripts/" class="dropdown-item">02 Scripts</a>
</li>
            
<li>
    <a href="../../06_Organizacion_y_Complejidad/03_Funciones/" class="dropdown-item">03 Funciones</a>
</li>
            
<li>
    <a href="../../06_Organizacion_y_Complejidad/04_Modulos/" class="dropdown-item">04 Modulos</a>
</li>
            
<li>
    <a href="../../06_Organizacion_y_Complejidad/05_BusqBinaria/" class="dropdown-item">05 BusqBinaria</a>
</li>
            
<li>
    <a href="../../06_Organizacion_y_Complejidad/06_Complejidad/" class="dropdown-item">06 Complejidad</a>
</li>
            
<li>
    <a href="../../06_Organizacion_y_Complejidad/07_gr%C3%A1ficos_de_complejidad/" class="dropdown-item">07 gráficos de complejidad</a>
</li>
            
<li>
    <a href="../../06_Organizacion_y_Complejidad/08_Cierre/" class="dropdown-item">08 Cierre</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">07 - Diseño, especificación, documentación y estilo</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../07_Plt_Especificacion_y_Documentacion/00_Resumen/" class="dropdown-item">00 Resumen</a>
</li>
            
<li>
    <a href="../../07_Plt_Especificacion_y_Documentacion/01_Repaso/" class="dropdown-item">01 Repaso</a>
</li>
            
<li>
    <a href="../../07_Plt_Especificacion_y_Documentacion/02_Excepciones/" class="dropdown-item">02 Excepciones</a>
</li>
            
<li>
    <a href="../../07_Plt_Especificacion_y_Documentacion/03_Modulo_principal/" class="dropdown-item">03 Modulo principal</a>
</li>
            
<li>
    <a href="../../07_Plt_Especificacion_y_Documentacion/04_Flexibilidad/" class="dropdown-item">04 Flexibilidad</a>
</li>
            
<li>
    <a href="../../07_Plt_Especificacion_y_Documentacion/05_Especificacion_y_Documentacion/" class="dropdown-item">05 Especificacion y Documentacion</a>
</li>
            
<li>
    <a href="../../07_Plt_Especificacion_y_Documentacion/06_Estilo/" class="dropdown-item">06 Estilo</a>
</li>
            
<li>
    <a href="../../07_Plt_Especificacion_y_Documentacion/07_Matplotlib/" class="dropdown-item">07 Matplotlib</a>
</li>
            
<li>
    <a href="../../07_Plt_Especificacion_y_Documentacion/08_Cierre/" class="dropdown-item">08 Cierre</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">08 - Fechas, Carpetas y Pandas</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../08_Fechas_Carpetas_y_Pandas/00_Resumen/" class="dropdown-item">00 Resumen</a>
</li>
            
<li>
    <a href="../../08_Fechas_Carpetas_y_Pandas/01_Intro/" class="dropdown-item">01 Intro</a>
</li>
            
<li>
    <a href="../../08_Fechas_Carpetas_y_Pandas/02_Fechas/" class="dropdown-item">02 Fechas</a>
</li>
            
<li>
    <a href="../../08_Fechas_Carpetas_y_Pandas/03_Archivos_y_Directorios/" class="dropdown-item">03 Archivos y Directorios</a>
</li>
            
<li>
    <a href="../../08_Fechas_Carpetas_y_Pandas/04_Ordenando_archivos/" class="dropdown-item">04 Ordenando archivos</a>
</li>
            
<li>
    <a href="../../08_Fechas_Carpetas_y_Pandas/05_Pandas/" class="dropdown-item">05 Pandas</a>
</li>
            
<li>
    <a href="../../08_Fechas_Carpetas_y_Pandas/06_Series_Temporales/" class="dropdown-item">06 Series Temporales</a>
</li>
            
<li>
    <a href="../../08_Fechas_Carpetas_y_Pandas/07_Cierre/" class="dropdown-item">07 Cierre</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">09 - Clases y objetos</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../09_Clases_y_Objetos/00_Resumen/" class="dropdown-item">00 Resumen</a>
</li>
            
<li>
    <a href="../../09_Clases_y_Objetos/01_Intro/" class="dropdown-item">01 Intro</a>
</li>
            
<li>
    <a href="../../09_Clases_y_Objetos/02_Clases/" class="dropdown-item">02 Clases</a>
</li>
            
<li>
    <a href="../../09_Clases_y_Objetos/03_Herencia/" class="dropdown-item">03 Herencia</a>
</li>
            
<li>
    <a href="../../09_Clases_y_Objetos/04_M%C3%A9todos_Especiales/" class="dropdown-item">04 Métodos Especiales</a>
</li>
            
<li>
    <a href="../../09_Clases_y_Objetos/05_Pilas_Colas/" class="dropdown-item">05 Pilas Colas</a>
</li>
            
<li>
    <a href="../../09_Clases_y_Objetos/06_Teledeteccion/" class="dropdown-item">06 Teledeteccion</a>
</li>
            
<li>
    <a href="../../09_Clases_y_Objetos/07_Cierre/" class="dropdown-item">07 Cierre</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">10 - Generadores e iteradores</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../10_Generadores_e_Iteradores/00_Resumen/" class="dropdown-item">00 Resumen</a>
</li>
            
<li>
    <a href="../../10_Generadores_e_Iteradores/01_Intro/" class="dropdown-item">01 Intro</a>
</li>
            
<li>
    <a href="../../10_Generadores_e_Iteradores/02_protocolo_Iteracion/" class="dropdown-item">02 protocolo Iteracion</a>
</li>
            
<li>
    <a href="../../10_Generadores_e_Iteradores/03_iteracion_a_medida/" class="dropdown-item">03 iteracion a medida</a>
</li>
            
<li>
    <a href="../../10_Generadores_e_Iteradores/04_Producers_consumers/" class="dropdown-item">04 Producers consumers</a>
</li>
            
<li>
    <a href="../../10_Generadores_e_Iteradores/05_Mas_generadores/" class="dropdown-item">05 Mas generadores</a>
</li>
            
<li>
    <a href="../../10_Generadores_e_Iteradores/06_PredadorPresa/" class="dropdown-item">06 PredadorPresa</a>
</li>
            
<li>
    <a href="../../10_Generadores_e_Iteradores/07_Cierre/" class="dropdown-item">07 Cierre</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">11 - Recursión y regresión</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../11_Recursion/00_Resumen/" class="dropdown-item">00 Resumen</a>
</li>
            
<li>
    <a href="../../11_Recursion/01_Introduccion/" class="dropdown-item">01 Introduccion</a>
</li>
            
<li>
    <a href="../../11_Recursion/02_Recursion/" class="dropdown-item">02 Recursion</a>
</li>
            
<li>
    <a href="../../11_Recursion/03_Diseno_Recursivo/" class="dropdown-item">03 Diseno Recursivo</a>
</li>
            
<li>
    <a href="../../11_Recursion/05_EjerciciosRec/" class="dropdown-item">05 EjerciciosRec</a>
</li>
            
<li>
    <a href="../../11_Recursion/05_Regresion_Lineal/" class="dropdown-item">05 Regresion Lineal</a>
</li>
            
<li>
    <a href="../../11_Recursion/06_Cierre/" class="dropdown-item">06 Cierre</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">12 - Ordenamiento</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../00_Resumen/" class="dropdown-item">00 Resumen</a>
</li>
            
<li>
    <a href="../01_Introduccion/" class="dropdown-item">01 Introduccion</a>
</li>
            
<li>
    <a href="../02_Ordenamiento_sencillo/" class="dropdown-item">02 Ordenamiento sencillo</a>
</li>
            
<li>
    <a href="./" class="dropdown-item active">03 Divide and Conquer</a>
</li>
            
<li>
    <a href="../04_introduccion_al_AA/" class="dropdown-item">04 introduccion al AA</a>
</li>
            
<li>
    <a href="../05_Cierre/" class="dropdown-item">05 Cierre</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Buscar
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../02_Ordenamiento_sencillo/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Anterior
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../04_introduccion_al_AA/" class="nav-link">
                                    Siguiente <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Tabla de contenidos">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#123-divide-y-reinaras" class="nav-link">12.3 Divide y reinarás</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#el-algoritmo-merge-sort-u-ordenamiento-por-mezcla" class="nav-link">El algoritmo merge sort (u ordenamiento por mezcla)</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="3"><a href="#ejemplo-arbol-de-recursion" class="nav-link">Ejemplo: Árbol de recursión</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#cuanto-cuesta-el-merge-sort" class="nav-link">¿Cuánto cuesta el Merge sort?</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#resumen" class="nav-link">Resumen</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#ejercicios" class="nav-link">Ejercicios:</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="3"><a href="#ejercicio-126" class="nav-link">Ejercicio 12.6:</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#ejercicio-127" class="nav-link">Ejercicio 12.7:</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#el-modulo-timeit" class="nav-link">El módulo timeit</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="3"><a href="#ejemplo-evaluar-el-metodo-de-ordenamiento-por-seleccion-con-timeit" class="nav-link">Ejemplo: evaluar el método de ordenamiento por selección con timeit.</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#ejercicio-128" class="nav-link">Ejercicio 12.8:</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#ejercicio-129" class="nav-link">Ejercicio 12.9:</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<p><a href="../Contenidos.md">Contenidos</a> | <a href="../02_Ordenamiento_sencillo/">Anterior (2 Ordenamientos sencillos de listas)</a> | <a href="../04_introduccion_al_AA/">Próximo (4 Algoritmos de clasificación supervisada)</a></p>
<h1 id="123-divide-y-reinaras">12.3 Divide y reinarás</h1>
<p>Para esta sección tenemos este <a href="https://youtu.be/ZSRn0ob4ukM">video introductorio</a>.</p>
<p>El problema del ordenamiento es un problema fundamental y hay <a href="https://www.youtube.com/watch?v=kPRA0W1kECg">muchísimos algoritmos que lo resuelven</a>. Los métodos de ordenamiento vistos en la sección anterior eran métodos
iterativos cuyo tiempo de ejecución era cuadrático.</p>
<p>Veremos ahora el <strong>merge sort</strong> que es un algoritmo un poco más complejo conceptualmente pero menos complejo computacionalmente. El algoritmo está basado en una idea muy fecunda en el diseño de algoritmos eficientes que se denomina <strong>divide y reinarás</strong> (ó <em>divide and conquer</em> en inglés). </p>
<p>Divide y reinarás es un paradigma de diseño de algoritmos recursivos que trabaja partiendo (dividiendo) el problema original en subproblemas del mismo tipo pero más sencillos de resolver. Las soluciones de estos subproblemas luego se combinan para obtener una solución del problema original. </p>
<p>La correctitud de los algoritmos de este tipo suele probarse utilizando la inducción matemática y el cálculo de su complejidad involucra la resolución de ecuaciones de recurrencia cuyos detalles escapan el alcance de este curso.</p>
<h2 id="el-algoritmo-merge-sort-u-ordenamiento-por-mezcla">El algoritmo <em>merge sort</em> (u ordenamiento por mezcla)</h2>
<p><img alt="con colores" src="https://img.devrant.com/devrant/rant/r_950434_EjPWY.gif" /></p>
<p>El <em>merge sort</em> se basa en la siguiente idea:</p>
<ul>
<li>Si la lista es pequeña (vacía o de tamaño 1) ya está ordenada y
no hay nada que hacer. De lo contrario hacer lo siguiente:</li>
<li>Dividir la lista al medio, formando dos sublistas de (aproximadamente) el
mismo tamaño cada una.</li>
<li>Ordenar cada una de esas dos sublistas (usando
este mismo método).</li>
<li>Una vez que se ordenaron ambas sublistas, intercalarlas (mergearlas)  de manera ordenada.</li>
</ul>
<p>Por ejemplo, si la lista original es <code>[6, 7, -1, 0, 5, 2, 3, 8]</code>
deberemos ordenar recursivamente <code>[6, 7, -1, 0]</code> y
<code>[5, 2, 3, 8]</code> con lo cual obtendremos <code>[-1, 0, 6, 7]</code> y
<code>[2, 3, 5, 8]</code>.  Si intercalamos ordenadamente las dos listas
ordenadas obtenemos la solución buscada:
<code>[-1, 0, 2, 3, 5, 6, 7, 8]</code>.</p>
<p>Veamos otro ejemplo con un gif animado:</p>
<p><img alt="mergesort" src="../Merge-sort-example-300px.gif" /></p>
<p>Diseñemos la función <code>merge_sort(lista)</code>:</p>
<ul>
<li>Si lista es pequeña (vacía o de tamaño 1) ya está ordenada y
no hay nada que hacer. Se devuelve lista original.</li>
<li>De lo contrario:</li>
<li><code>medio = len(lista) // 2</code></li>
<li><code>izq = merge_sort(lista[:medio])</code></li>
<li><code>der = merge_sort(lista[medio:])</code></li>
<li>Se devuelve <code>merge(izq, der)</code>.</li>
</ul>
<p>Falta sólo diseñar la función <code>merge</code>: dadas dos listas ordenadas
debe obtener una nueva lista que resulte de intercalar a ambas de manera
ordenada:</p>
<ul>
<li>Utilizaremos dos índices, <code>i</code> y <code>j</code>, para recorrer
cada una de las dos listas.</li>
<li>
<p>Utilizaremos una tercera lista, <code>resultado</code>, donde
almacenaremos el resultado.</p>
</li>
<li>
<p>Mientras <code>i</code> sea menor que el largo de <code>lista1</code> y
<code>j</code> menor que el largo de <code>lista2</code>, significa que hay
elementos para comparar en ambas listas.</p>
</li>
<li>
<p>Si el menor es el de <code>lista1</code>:</p>
</li>
<li>Agregar el elemento <code>lista1[i]</code> al final de la lista <code>resultado</code>.</li>
<li>Incrementar el índice <code>i</code>.</li>
<li>de lo contrario:</li>
<li>Agregar el elemento <code>lista2[j]</code> al final de la lista <code>resultado</code>.</li>
<li>
<p>Incrementar el índice <code>j</code>.</p>
</li>
<li>
<p>Una vez que una de las dos listas se termina, simplemente hay que
agregar todo lo que queda en la otra al final de la lista <code>resultado</code>.</p>
</li>
</ul>
<p>El código resultante del diseño de ambas funciones puede verse a continuación:</p>
<pre><code class="language-python">import random

def merge_sort(lista):
    &quot;&quot;&quot;Ordena lista mediante el método merge sort.
       Pre: lista debe contener elementos comparables.
       Devuelve: una nueva lista ordenada.&quot;&quot;&quot;
    if len(lista) &lt; 2:
        lista_nueva = lista
    else:
        medio = len(lista) // 2
        izq = merge_sort(lista[:medio])
        der = merge_sort(lista[medio:])
        lista_nueva = merge(izq, der)
    return lista_nueva

def merge(lista1, lista2):
    &quot;&quot;&quot;Intercala los elementos de lista1 y lista2 de forma ordenada.
       Pre: lista1 y lista2 deben estar ordenadas.
       Devuelve: una lista con los elementos de lista1 y lista2.&quot;&quot;&quot;
    i, j = 0, 0
    resultado = []

    while(i &lt; len(lista1) and j &lt; len(lista2)):
        if (lista1[i] &lt; lista2[j]):
            resultado.append(lista1[i])
            i += 1
        else:
            resultado.append(lista2[j])
            j += 1

    # Agregar lo que falta de una lista
    resultado += lista1[i:]
    resultado += lista2[j:]

    return resultado
</code></pre>
<p>El método <strong>divide y reinarás</strong> que hemos usado para resolver el problema de ordenar una lista puede aplicarse también en otras situaciones. Hace falta que sea posible resolver el problema partiéndolo en varios subproblemas de tamaño menor, resolver cada uno de esos subproblemas por separado aplicando
la misma técnica (en nuestro caso ordenar por mezcla cada una de las dos
sublistas), y finalmente juntar estas soluciones parciales en una solución
completa del problema mayor (en nuestro caso la intercalación ordenada de las
dos sublistas ordenadas).</p>
<p>Como siempre sucede con las soluciones recursivas, debemos encontrar un caso
base en el cual no se aplica la llamada recursiva (en nuestro caso: si la lista tiene largo cero o uno, ya está ordenada y no hay nada que hacer). Además debemos asegurar que siempre se alcanza el caso base, y en nuestro caso aseguramos eso porque, si no estamos en el caso base, la lista se divide en mitades decrementando su longitud.</p>
<p>El método <strong>divide y reinarás</strong> es fecundo y ha dado lugar a algoritmos muy eficientes para tareas muy disímiles como multiplicar matrices, calcular la transformada de Fourier o realizar análisis sintácticos (parsear).</p>
<h3 id="ejemplo-arbol-de-recursion">Ejemplo: Árbol de recursión</h3>
<p>Para representar gráficamente las llamadas recursivas de la función <code>merge_sort()</code> podemos hacer un árbol similar al que mostramos en la
<a href="../../11_Recursion/02_Recursion/#un-ejemplo-de-recursión-poco-eficiente">Sección 11.2</a> para la sucesión de Fibonacci. Esta vez, como queremos mostrar no sólo las llamadas sino también lo que devuelve cada llamada, espejaremos el árbol obteniendo un grafo.</p>
<p>Acá mostramos el árbol de recursión de <code>merge_sort([3, 1, 0, 4, 2])</code>.</p>
<p align="center">
<img src="./arbol_recursion.jpg" width="300">
</p>

<h3 id="cuanto-cuesta-el-merge-sort">¿Cuánto cuesta el <em>Merge sort</em>?</h3>
<p>Supongamos que tenemos que ordenar una lista de l longitud  <code>N</code> . Observamos lo siguiente:</p>
<ul>
<li>
<p>Para intercalar dos listas de longitud <code>N/2</code> hace falta recorrer
ambas listas que en total tienen <code>N</code> elementos. La cantidad de operaciones resulta proporcional a <code>N</code>. Llamemos <code>a * N</code> a ese tiempo.</p>
</li>
<li>
<p>Si llamamos <code>T(N)</code> al tiempo que tarda el algoritmo en ordenar
una lista de longitud <code>N</code>, vemos que <code>T(N) = 2 * T(N/2) + a * N</code>.</p>
</li>
<li>
<p>Además, cuando la lista es pequeña, la operación es de tiempo
constante: <code>T(1) = T(0) = b</code>.</p>
</li>
</ul>
<p>Para simplificar la cuenta vamos a suponer que <code>N = 2^k</code>.</p>
<pre><code>T(N) = T(2^k) = 2 * T(2^(k-1)) + a * 2^k 
              = 2 * ( 2 * T(2^(k-2)) + a * 2^(k-1)) + a * 2^k
              = 2^2 * T(2^(k-2)) + a * 2^k +a * 2^k
              .
              .
              .
              = 2^i * T(2^(k-i))+ i * a * 2^k
              .
              .
              .
              = 2^k * T(1) + k * a * 2^k
              = b * 2^k  + k * a * 2^k
</code></pre>
<p>Pero si <code>N = 2^k</code> entonces <code>k = log2(N)</code>, y por lo tanto hemos demostrado
que:</p>
<p><code>T(N) = b * N + a * N * log2(N).</code></p>
<p>Como lo que nos interesa es aproximar el valor, diremos (despreciando el
término de menor orden) que</p>
<p><code>T(N) ~ N * log2(N)</code></p>
<p>Dado que <code>log2(N)</code> es un número mucho más pequeño que <code>N</code>, hemos mostrado entonces que el merge sort se porta mucho mejor (es decir, es más eficiente) que los tres métodos de ordenamiento que discutimos en la sección anterior (que eran cuadráticos).</p>
<p>Si analizamos el espacio que consume, vemos que a cada paso la función <code>merge</code>
genera una nueva lista cuya longitud es la suma de los tamaños de las dos
listas, por lo que <code>merge_sort</code> usa el doble de espacio que la lista de entrada.</p>
<h2 id="resumen">Resumen</h2>
<ul>
<li>
<p>Los métodos de ordenamiento de selección, inserción y burbujeo presentados en la sección anterior son métodos conceptualmente sencillos pero costosos en cantidad de operaciones (intercambios y/o comparaciones).  Sin embargo, es posible conseguir métodos más eficientes usando algoritmos recursivos.</p>
</li>
<li>
<p>El algoritmo <em>merge sort</em> consiste en dividir la lista a ordenar
hasta que tenga 1 ó 0 elementos y luego combinar la lista de forma ordenada.
De esta manera se logra un tiempo proporcional a <code>N * log2(N)</code>.</p>
</li>
</ul>
<h2 id="ejercicios">Ejercicios:</h2>
<h3 id="ejercicio-126">Ejercicio 12.6:</h3>
<p>Ordená la lista <code>[6, 0, 3, 2, 5, 7, 4, 1]</code> usando el método merge sort. Dibujá el árbol de recursión explicando las llamadas que se hacen en cada paso, y el orden en el que se realizan, como mostramos más arriba para la lista <code>[3, 1, 0, 4, 2]</code>.</p>
<h3 id="ejercicio-127">Ejercicio 12.7:</h3>
<p>Modificá la función <code>merge_sort</code> para que también devuelva la cantidad de comparaciones hechas. Rehacé el último ejercicio de la sección anterior (<a href="../02_Ordenamiento_sencillo/#ejercicio-125-comparar-métodos-gráficamente">Ejercicio 12.5</a>) incorporando el merge sort a la comparación y al gráfico. Describí con tus palabras qué observas.</p>
<p>Guardá el archivo <code>comparaciones_ordenamiento.py</code> con estas modificaciones, para entregarlo.</p>
<h2 id="el-modulo-timeit">El módulo <code>timeit</code></h2>
<p>Hay casos en que contar la cantidad de operaciones que un algoritmo realiza se vuelve muy engorroso. Una alternativa simple aunque menos exacta es medir su tiempo de ejecución para problemas de distintos tamaños y estimar el orden del algoritmo a partir del cambio en el tiempo de ejecución al cambiar el tamaño del problema. </p>
<p>Existe un <a href="https://docs.python.org/3/library/timeit.html">módulo llamado <code>timeit</code></a> que permite medir tiempos de ejecución de código Python.</p>
<p>El comando <code>timeit()</code> del modulo <code>timeit</code> devuelve, en segundos, el tiempo de ejecución total para el comando y número de repeticiones especificadas. El código a ejecutar y la cantidad de ejecuciones se pasan como parámetros. En esta sección, vamos a usarlo para comparar algoritmos de ordenamiento.</p>
<p>En el siguiente ejemplo se le pide a Python una demora de 1 segundo (sleep(1)) y se le pide a timeit() que devuelva el tiempo de ejecución de ese comando, ejecutado una sola vez). Probálo varias veces:</p>
<pre><code class="language-python">In [1]: import time
In [2]: import timeit as tt
In [3]: tt.timeit('time.sleep(1)',number = 1)
Out[3]: 1.0010360410087742
</code></pre>
<p>Notarás que el tiempo de ejecución está muy cerca del esperado (1 segundo), pero no es exactamente ese valor y además hay cierta variacion entre repeticiones. </p>
<p>Ahora evaluemos la siguiente expresión, que concatena en un string los primeros 100 números enteros. Ejecutala por lo menos diez veces y mirá como varía la salida:</p>
<pre><code class="language-python">In [4]: tt.timeit('&quot;-&quot;.join(str(n) for n in range(100))', number = 1)
Out[4]: 6.670000296551734e-05
</code></pre>
<p>Si medimos un proceso que tarda poco tiempo como en el último ejemplo, obtendremos resultados con una variabilidad de magnitud similar a la duración del proceso. Si queremos comparar duraciones relativas es mejor medir procesos largos o, si se trata de un proceso corto, repetirlo muchas veces. Usando <code>timeit()</code> podemos hacer esto cambiando el parametro <code>number</code>.</p>
<p>Probá lo siguiente:</p>
<pre><code class="language-python">In [5]: tt.timeit('&quot;-&quot;.join(str(n) for n in range(100))', number = 10000)
Out[5]: 0.3018611848820001
</code></pre>
<p>Ahora comparemos la duración de ese código python con la duración de otras expresiones que dan el mismo resultado. Ejecutá cada una varias veces:</p>
<pre><code class="language-python">In [6]: tt.timeit('&quot;-&quot;.join(str(n) for n in range(100))', number = 10000)
Out[6]: 0.3018611848820001
In [7]: tt.timeit('&quot;-&quot;.join([str(n) for n in range(100)])', number = 10000)
Out[7]: 0.2727368790656328
In [8]: tt.timeit('&quot;-&quot;.join(map(str, range(100)))', number = 10000)
Out[8]: 0.23702679807320237
</code></pre>
<h3 id="ejemplo-evaluar-el-metodo-de-ordenamiento-por-seleccion-con-timeit">Ejemplo: evaluar el método de ordenamiento por selección con <code>timeit</code>.</h3>
<p>Queremos evaluar cuánto tarda del método de ordenamiento por selección para diferentes longitudes de la lista a ordenar.</p>
<p>Para eso, primero generamos listas de longitudes entre 1 y 256.</p>
<pre><code class="language-python">listas = []
for N in range(1, 256):
    listas.append(generar_lista(N))
</code></pre>
<p>Luego, definimos una función "wrapper""(envoltorio) llamada <code>experimento_timeit_seleccion(listas, num)</code> que realiza un experimento usando timeit para evaluar el método de selección (repitiendo <code>num</code> veces) con las listas que le pasamos como parámetro, y devuelve en un vector los tiempos de ejecución para cada lista.</p>
<pre><code class="language-python">def experimento_timeit_seleccion(listas, num):
    &quot;&quot;&quot;
    Realiza un experimento usando timeit para evaluar el método
    de selección para ordenamiento de listas
    con las listas pasadas como entrada
    y devuelve los tiempos de ejecución para cada lista
    en un vector.
    El parámetro 'listas' debe ser una lista de listas.
    El parámetro 'num' indica el número de veces que repite el ordenamiento para cada lista.
    &quot;&quot;&quot;
    tiempos_seleccion = []

    global lista

    for lista in listas:

        # evalúo el método de selección
        # en una copia nueva para cada iteración
        tiempo_seleccion = tt.timeit('ord_seleccion(lista.copy())', number = num, globals = globals())

        # guardo el resultado
        tiempos_seleccion.append(tiempo_seleccion)

    # paso los tiempos a arrays
    tiempos_seleccion = np.array(tiempos_seleccion)

    return tiempos_seleccion
</code></pre>
<p>El parámetro <code>globals = globals()</code> permite a <code>timeit()</code> acceder a las variables y funciones definidas en el namespace global en que se está ejecutando. El comando <code>global lista</code> hace que la variable <code>lista</code> que va recorriendo la lista de listas, sea <em>global</em> y por lo tanto accesible a <code>timeit()</code>.</p>
<p>Y ahora realizamos el experimento y lo graficamos.</p>
<pre><code class="language-python">tiempos_seleccion = experimento_timeit_seleccion(listas, 100)
plt.plot(tiempos_seleccion)
</code></pre>
<p><img alt="experimento_timeit_seleccion" src="../experimento_timeit_seleccion.jpg" /></p>
<h3 id="ejercicio-128">Ejercicio 12.8:</h3>
<p>La idea de este ejercicio es, nuevamente, comparar los algoritmos de ordenamiento que vimos hasta ahora pero usando <code>timeit()</code> en lugar de contando a mano la cantidad de operaciones.</p>
<ul>
<li>
<p>Juntá en el archivo <code>time_ordenamiento.py</code> los métodos de búsqueda del <a href="./#ejercicio-127">Ejercicio 12.7</a>.</p>
</li>
<li>
<p>Antes de empezar el experimento, eliminá de las funciones a medir todo código no esencial, en particular los prints para debug. Consumen tiempo y no son parte del algoritmo. También eliminá las cuentas de comparaciones, que ahora no son necesarias.</p>
</li>
<li>
<p>Escribí un experimento que, tal como hiciste en el <a href="../02_Ordenamiento_sencillo/#ejercicio-125-comparar-métodos-gráficamente">Ejercicio 12.5</a>,
para <code>N</code> entre 1 y 256 genere una lista de largo <code>N</code> con números enteros del 1 al 1000, calcule el tiempo que tarda cada método en ordenar la lista y guarde estos resultados en vectores de largo 256.</p>
</li>
<li>
<p>En este caso, vas a tener que generar y guardar todas las listas a ser utilizadas antes de correr el experimento, para poder usar las mismas repetidas veces al evaluar cada método. Definí para eso una función <code>generar_listas(Nmax)</code> que genere una lista de listas, una de cada longitud entre 1 y <code>Nmax</code>, con valores aleatorios entre 1 y 1000.</p>
</li>
<li>
<p>Asegurate de evaluar todos los métodos de ordenamiento con las mismas listas (siempre usá copias para no ordenar listas que ya están ordenadas) y guardar esta información para poder mostrarla o usarla.</p>
</li>
<li>
<p>Graficá los datos de tiempos de ejecución en función de las longitudes de las listas. ¿Coinciden las curvas con lo que habías predicho estimando el número de operaciones?</p>
</li>
<li>
<p>Guardá el archivo <code>time_ordenamiento.py</code> para entregarlo.</p>
</li>
</ul>
<h3 id="ejercicio-129">Ejercicio 12.9:</h3>
<p>Opcional: Escribí una función <code>merge3sort</code> que funcione igual que el merge sort pero en lugar de dividir la lista de entrada en dos partes, la divida en tres partes. Deberás escribir la función <code>merge3(lista1, lista2, lista3)</code>.</p>
<p>Probá tu función en las siguientes listas:</p>
<pre><code class="language-python">unalista = [1, 4, 3, 1, 7, 5]
otralista = [7, 6, 5, 4, 3, 2, 1, 0]
</code></pre>
<p>¿Cómo te parece que se va a comportar este método con respecto al merge sort original? Agregá este nuevo método a la comparación del ejercicio anterior.</p>
<p><a href="../Contenidos.md">Contenidos</a> | <a href="../02_Ordenamiento_sencillo/">Anterior (2 Ordenamientos sencillos de listas)</a> | <a href="../04_introduccion_al_AA/">Próximo (4 Algoritmos de clasificación supervisada)</a></p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentación construida con <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Buscar</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Cerrar</span></button>
            </div>
            <div class="modal-body">
                <p>Desde aquí puede buscar estos documentos. Ingrese sus términos de búsqueda a continuación.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Buscando..." id="mkdocs-search-query" title="Escriba el término de búsqueda aquí">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No se encontraron resultados"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Atajos de teclado</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Cerrar</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Teclas</th>
                    <th>Acción</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Abrir esta ayuda</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Página siguiente</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Página anterior</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Buscar</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
